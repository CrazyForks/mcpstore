# ğŸ” æƒé™è®¤è¯ç³»ç»Ÿæ¦‚è§ˆ

MCPStore æä¾›äº†åŸºäº FastMCP çš„å®Œæ•´æƒé™è®¤è¯ç³»ç»Ÿï¼Œæ”¯æŒä¼ä¸šçº§çš„å®‰å…¨æ§åˆ¶å’Œå¤šç§è®¤è¯æ–¹å¼ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ¨ å®Œå…¨åŸºäº FastMCP
- **æ— é‡å¤å®ç°**: å®Œå…¨ä½¿ç”¨ FastMCP çš„æ ‡å‡†è®¤è¯æœºåˆ¶
- **æ ‡å‡†å…¼å®¹**: æ”¯æŒ JWTã€OAuth 2.0 ç­‰è¡Œä¸šæ ‡å‡†
- **é«˜æ€§èƒ½**: åŸç”Ÿ FastMCP æ€§èƒ½ï¼Œæ— é¢å¤–å¼€é”€

### ğŸ”’ å¤šç§è®¤è¯æ–¹å¼
- **Bearer Token**: JWT è®¤è¯ï¼Œæ”¯æŒ JWKS
- **Google OAuth**: Google ä¼ä¸šè®¤è¯é›†æˆ
- **GitHub OAuth**: GitHub è®¤è¯æ”¯æŒ
- **WorkOS**: ä¼ä¸šçº§ SSO è§£å†³æ–¹æ¡ˆ
- **è‡ªå®šä¹‰**: å¯æ‰©å±•çš„è®¤è¯æä¾›è€…

### ğŸ­ çµæ´»çš„æƒé™æ§åˆ¶
- **Scopes æƒé™**: åŸºäº FastMCP scopes çš„ç»†ç²’åº¦æƒé™
- **JWT Claims**: è‡ªå®šä¹‰å£°æ˜æ”¯æŒ
- **æœåŠ¡çº§ä¿æŠ¤**: å•ç‹¬é…ç½®æ¯ä¸ªæœåŠ¡çš„è®¤è¯
- **Hub çº§ä¿æŠ¤**: æ•´ä¸ª Hub çš„ç»Ÿä¸€è®¤è¯

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯å®‰å…¨å­˜å‚¨
- **Token è¿‡æœŸ**: è‡ªåŠ¨ token ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æƒé™éªŒè¯**: è¿è¡Œæ—¶æƒé™æ£€æŸ¥
- **å®¡è®¡æ—¥å¿—**: è®¤è¯æ“ä½œè®°å½•

## ğŸ“‹ è®¤è¯æµç¨‹

```mermaid
graph TB
    A[å®¢æˆ·ç«¯è¯·æ±‚] --> B{è®¤è¯æ£€æŸ¥}
    B -->|æ— è®¤è¯| C[æ‹’ç»è®¿é—®]
    B -->|æœ‰è®¤è¯| D[éªŒè¯ Token]
    D -->|æ— æ•ˆ| C
    D -->|æœ‰æ•ˆ| E[æ£€æŸ¥ Scopes]
    E -->|æƒé™ä¸è¶³| C
    E -->|æƒé™å……è¶³| F[æ‰§è¡Œå·¥å…·]
    F --> G[è¿”å›ç»“æœ]
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### è®¤è¯å±‚çº§
1. **è®¤è¯æä¾›è€…å±‚**: é…ç½®å„ç§è®¤è¯æ–¹å¼
2. **æœåŠ¡è®¤è¯å±‚**: ä¸ºæ¯ä¸ªæœåŠ¡é…ç½®ç‹¬ç«‹è®¤è¯
3. **Hub è®¤è¯å±‚**: Hub çº§åˆ«çš„ç»Ÿä¸€è®¤è¯
4. **å·¥å…·ä¿æŠ¤å±‚**: ç»†ç²’åº¦çš„å·¥å…·è®¿é—®æ§åˆ¶

### æ•°æ®æµ
```mermaid
sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant A as è®¤è¯æä¾›è€…
    participant S as MCPStore
    participant F as FastMCP
    participant T as å·¥å…·

    C->>A: è·å– Token
    A->>C: è¿”å› JWT Token
    C->>S: è¯·æ±‚è°ƒç”¨å·¥å…· (å¸¦ Token)
    S->>F: éªŒè¯ Token
    F->>S: Token æœ‰æ•ˆ + Scopes
    S->>T: æ‰§è¡Œå·¥å…·
    T->>S: è¿”å›ç»“æœ
    S->>C: è¿”å›ç»“æœ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½® Bearer Token è®¤è¯
```python
from mcpstore import MCPStore

store = MCPStore()

# é…ç½®æœåŠ¡è®¤è¯
auth_config = store.for_store().auth_service("my-api")\
    .require_scopes("read", "write")\
    .use_bearer_auth(
        jwks_uri="https://auth.example.com/.well-known/jwks.json",
        issuer="https://auth.example.com",
        audience="my-service"
    )\
    .generate_fastmcp_config()
```

### 2. ç”Ÿæˆç”¨æˆ· JWT Payload
```python
# ä¸ºç”¨æˆ·ç”Ÿæˆ JWT payload
user_payload = store.for_store().auth_jwt_payload("user123")\
    .add_scopes("read", "write", "execute")\
    .add_claim("role", "admin")\
    .add_claim("tenant_id", "company_abc")\
    .generate_payload()
```

### 3. é…ç½® OAuth è®¤è¯
```python
# Google OAuth
google_config = store.for_store().auth_provider("google")\
    .set_client_credentials("client_id", "client_secret")\
    .set_base_url("https://myapp.com")\
    .generate_fastmcp_config()
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- [è®¤è¯é…ç½®](configuration.md) - è¯¦ç»†é…ç½®æŒ‡å—
- [Bearer Token è®¤è¯](bearer-token.md) - JWT è®¤è¯é…ç½®
- [OAuth é›†æˆ](oauth-integration.md) - ç¬¬ä¸‰æ–¹è®¤è¯é›†æˆ
- [æƒé™ç®¡ç†](permissions.md) - Scopes å’Œæƒé™æ§åˆ¶
- [ç¯å¢ƒå˜é‡å®‰å…¨](environment-security.md) - æ•æ„Ÿä¿¡æ¯ç®¡ç†
- [Hub è®¤è¯](hub-authentication.md) - Hub çº§åˆ«è®¤è¯
- [API å‚è€ƒ](api-reference.md) - å®Œæ•´ API æ–‡æ¡£
- [æœ€ä½³å®è·µ](best-practices.md) - å®‰å…¨æœ€ä½³å®è·µ
- [æ•…éšœæ’é™¤](troubleshooting.md) - å¸¸è§é—®é¢˜è§£å†³

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### ä¼ä¸šåº”ç”¨
- **å†…éƒ¨å·¥å…·ä¿æŠ¤**: ä¿æŠ¤ä¼ä¸šå†…éƒ¨ MCP å·¥å…·
- **å¤šç§Ÿæˆ·æ”¯æŒ**: åŸºäº tenant_id çš„éš”ç¦»
- **è§’è‰²æƒé™**: ä¸åŒè§’è‰²çš„å·®å¼‚åŒ–æƒé™

### API æœåŠ¡
- **API ç½‘å…³**: ä½œä¸º MCP å·¥å…·çš„å®‰å…¨ç½‘å…³
- **ç¬¬ä¸‰æ–¹é›†æˆ**: å®‰å…¨çš„ç¬¬ä¸‰æ–¹æœåŠ¡è°ƒç”¨
- **å¾®æœåŠ¡è®¤è¯**: å¾®æœåŠ¡é—´çš„å®‰å…¨é€šä¿¡

### å¼€å‘æµ‹è¯•
- **å¼€å‘ç¯å¢ƒ**: å¼€å‘é˜¶æ®µçš„è®¤è¯é…ç½®
- **æµ‹è¯•éš”ç¦»**: æµ‹è¯•ç¯å¢ƒçš„æƒé™æ§åˆ¶
- **è°ƒè¯•å·¥å…·**: è®¤è¯ç›¸å…³çš„è°ƒè¯•åŠŸèƒ½

## âš ï¸ å®‰å…¨æç¤º

!!! warning "å®‰å…¨æ³¨æ„äº‹é¡¹"
    - æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
    - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨ API å¯†é’¥å’Œå¯†é’¥
    - å®šæœŸè½®æ¢è®¤è¯å‡­æ®
    - ç›‘æ§è®¤è¯æ—¥å¿—å’Œå¼‚å¸¸è®¿é—®
    - ä½¿ç”¨ HTTPS ä¼ è¾“æ•æ„Ÿæ•°æ®

!!! tip "æœ€ä½³å®è·µ"
    - ä½¿ç”¨æœ€å°æƒé™åŸåˆ™é…ç½® scopes
    - ä¸ºä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„è®¤è¯è®¾ç½®
    - å®šæœŸå®¡æŸ¥å’Œæ›´æ–°æƒé™é…ç½®
    - ä½¿ç”¨å¼ºå¯†ç å’Œå¤æ‚çš„ JWT å¯†é’¥
